const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/shiki-BpGKog2C.js","assets/monaco/bundled-types-D6QPnxzs.js","assets/modules/file-saver-BzOOqXCn.js","assets/modules/vue-rYqNAK_y.js","assets/monaco/bundled-types-DfXIvR3s.css","assets/modules/shiki-BwYsuT2u.js","assets/modules/shiki-Bxv373Z5.css"])))=>i.map(i=>d[i]);
import{r as v,d as Y,G as X,f as m,o as u,af as L,z as J,U as j,P as T,aT as U,S as H,E as O,ai as D,i as z,an as K,g as V,t as S,X as f,F as B,ak as x,b as Q,n as P,H as $,k as q,e as ee,w as te}from"./modules/vue-rYqNAK_y.js";import{n as ne,_ as E,k as ie,l as W}from"./monaco/bundled-types-D6QPnxzs.js";import{a as ae,a8 as se}from"./index-DSGHb_bY.js";import{u as oe}from"./slidev/context-BON9oZIr.js";import{_ as ce}from"./slidev/IconButton.vue_vue_type_script_setup_true_lang-Bay0pQgB.js";import"./modules/file-saver-BzOOqXCn.js";import"./modules/shiki-BwYsuT2u.js";const F={};function le(i){return i}var re=le;let y=null;async function de(){if(y)return y;let i="/pyodide/",t=i+"pyodide.js";try{const n=await fetch(t,{method:"GET"}),a=(n.headers.get("Content-Type")||"").includes("javascript");if(!n.ok||!a)throw new Error("Not valid JS file")}catch{i="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/",t=i+"pyodide.js"}if(await new Promise((n,r)=>{const a=document.createElement("script");a.src=t,a.onload=n,a.onerror=r,document.head.appendChild(a)}),typeof window.loadPyodide!="function")throw new Error(`loadPyodide not available from ${t}`);return y=await window.loadPyodide({indexURL:i}),await y.loadPackage(["numpy","scikit-learn","pandas","matplotlib","micropip"]),await y.runPythonAsync(`
async def _install_plotly():
    import micropip
    await micropip.install("plotly")
await _install_plotly()
`),await y.runPythonAsync(`
import numpy as np
np.set_printoptions(linewidth=10000)
from js import document, URL, Blob, setTimeout

def save_plot(fig, id="monaco-fig", filename="plot.html"):
    fig.write_html(filename, full_html=False, include_plotlyjs='cdn', config={'displayModeBar': False,'responsive': True})
    with open(filename, "r") as f:
        html = f.read()
    blob = Blob.new([html], { "type": "text/html" })
    url = URL.createObjectURL(blob)
    def insert_iframe():
        container = document.getElementById(id)
        if container:
            iframe = document.createElement("iframe")
            iframe.src = url
            iframe.style = "width: 100%; height: 100%; border: none;"
            container.innerHTML = ""
            container.appendChild(iframe)
    def wait_for_target(callback, retries=20):
        if document.getElementById(id):
            callback()
        elif retries > 0:
            setTimeout(lambda: wait_for_target(callback, retries - 1), 100)
    wait_for_target(insert_iframe)
`),y}const ge="/courses/data-science/vectorization-reduction/assets/cmu_movie_summary-Dh_5x7Wl.csv",ue="/courses/data-science/vectorization-reduction/assets/movie_metadata-eE3iEw3E.csv",me="/courses/data-science/vectorization-reduction/assets/movie_metadata_clean-QULovPml.csv",Ie="data:application/octet-stream;base64,SW5kZXggb2YgaXJpcwoKMDIgRGVjIDE5OTYgICAgICAxMDUgSW5kZXgKMDggTWFyIDE5OTMgICAgIDQ1NTEgaXJpcy5kYXRhCjMwIE1heSAxOTg5ICAgICAyNjA0IGlyaXMubmFtZXMK",pe="/courses/data-science/vectorization-reduction/assets/bezdekIris-DBLpqEkJ.data",he="/courses/data-science/vectorization-reduction/assets/iris-Bo99GViR.data",be="data:application/octet-stream;base64,MS4gVGl0bGU6IElyaXMgUGxhbnRzIERhdGFiYXNlCglVcGRhdGVkIFNlcHQgMjEgYnkgQy5CbGFrZSAtIEFkZGVkIGRpc2NyZXBlbmN5IGluZm9ybWF0aW9uCgoyLiBTb3VyY2VzOgogICAgIChhKSBDcmVhdG9yOiBSLkEuIEZpc2hlcgogICAgIChiKSBEb25vcjogTWljaGFlbCBNYXJzaGFsbCAoTUFSU0hBTEwlUExVQGlvLmFyYy5uYXNhLmdvdikKICAgICAoYykgRGF0ZTogSnVseSwgMTk4OAoKMy4gUGFzdCBVc2FnZToKICAgLSBQdWJsaWNhdGlvbnM6IHRvbyBtYW55IHRvIG1lbnRpb24hISEgIEhlcmUgYXJlIGEgZmV3LgogICAxLiBGaXNoZXIsUi5BLiAiVGhlIHVzZSBvZiBtdWx0aXBsZSBtZWFzdXJlbWVudHMgaW4gdGF4b25vbWljIHByb2JsZW1zIgogICAgICBBbm51YWwgRXVnZW5pY3MsIDcsIFBhcnQgSUksIDE3OS0xODggKDE5MzYpOyBhbHNvIGluICJDb250cmlidXRpb25zCiAgICAgIHRvIE1hdGhlbWF0aWNhbCBTdGF0aXN0aWNzIiAoSm9obiBXaWxleSwgTlksIDE5NTApLgogICAyLiBEdWRhLFIuTy4sICYgSGFydCxQLkUuICgxOTczKSBQYXR0ZXJuIENsYXNzaWZpY2F0aW9uIGFuZCBTY2VuZSBBbmFseXNpcy4KICAgICAgKFEzMjcuRDgzKSBKb2huIFdpbGV5ICYgU29ucy4gIElTQk4gMC00NzEtMjIzNjEtMS4gIFNlZSBwYWdlIDIxOC4KICAgMy4gRGFzYXJhdGh5LCBCLlYuICgxOTgwKSAiTm9zaW5nIEFyb3VuZCB0aGUgTmVpZ2hib3Job29kOiBBIE5ldyBTeXN0ZW0KICAgICAgU3RydWN0dXJlIGFuZCBDbGFzc2lmaWNhdGlvbiBSdWxlIGZvciBSZWNvZ25pdGlvbiBpbiBQYXJ0aWFsbHkgRXhwb3NlZAogICAgICBFbnZpcm9ubWVudHMiLiAgSUVFRSBUcmFuc2FjdGlvbnMgb24gUGF0dGVybiBBbmFseXNpcyBhbmQgTWFjaGluZQogICAgICBJbnRlbGxpZ2VuY2UsIFZvbC4gUEFNSS0yLCBOby4gMSwgNjctNzEuCiAgICAgIC0tIFJlc3VsdHM6CiAgICAgICAgIC0tIHZlcnkgbG93IG1pc2NsYXNzaWZpY2F0aW9uIHJhdGVzICgwJSBmb3IgdGhlIHNldG9zYSBjbGFzcykKICAgNC4gR2F0ZXMsIEcuVy4gKDE5NzIpICJUaGUgUmVkdWNlZCBOZWFyZXN0IE5laWdoYm9yIFJ1bGUiLiAgSUVFRSAKICAgICAgVHJhbnNhY3Rpb25zIG9uIEluZm9ybWF0aW9uIFRoZW9yeSwgTWF5IDE5NzIsIDQzMS00MzMuCiAgICAgIC0tIFJlc3VsdHM6CiAgICAgICAgIC0tIHZlcnkgbG93IG1pc2NsYXNzaWZpY2F0aW9uIHJhdGVzIGFnYWluCiAgIDUuIFNlZSBhbHNvOiAxOTg4IE1MQyBQcm9jZWVkaW5ncywgNTQtNjQuICBDaGVlc2VtYW4gZXQgYWwncyBBVVRPQ0xBU1MgSUkKICAgICAgY29uY2VwdHVhbCBjbHVzdGVyaW5nIHN5c3RlbSBmaW5kcyAzIGNsYXNzZXMgaW4gdGhlIGRhdGEuCgo0LiBSZWxldmFudCBJbmZvcm1hdGlvbjoKICAgLS0tIFRoaXMgaXMgcGVyaGFwcyB0aGUgYmVzdCBrbm93biBkYXRhYmFzZSB0byBiZSBmb3VuZCBpbiB0aGUgcGF0dGVybgogICAgICAgcmVjb2duaXRpb24gbGl0ZXJhdHVyZS4gIEZpc2hlcidzIHBhcGVyIGlzIGEgY2xhc3NpYyBpbiB0aGUgZmllbGQKICAgICAgIGFuZCBpcyByZWZlcmVuY2VkIGZyZXF1ZW50bHkgdG8gdGhpcyBkYXkuICAoU2VlIER1ZGEgJiBIYXJ0LCBmb3IKICAgICAgIGV4YW1wbGUuKSAgVGhlIGRhdGEgc2V0IGNvbnRhaW5zIDMgY2xhc3NlcyBvZiA1MCBpbnN0YW5jZXMgZWFjaCwKICAgICAgIHdoZXJlIGVhY2ggY2xhc3MgcmVmZXJzIHRvIGEgdHlwZSBvZiBpcmlzIHBsYW50LiAgT25lIGNsYXNzIGlzCiAgICAgICBsaW5lYXJseSBzZXBhcmFibGUgZnJvbSB0aGUgb3RoZXIgMjsgdGhlIGxhdHRlciBhcmUgTk9UIGxpbmVhcmx5CiAgICAgICBzZXBhcmFibGUgZnJvbSBlYWNoIG90aGVyLgogICAtLS0gUHJlZGljdGVkIGF0dHJpYnV0ZTogY2xhc3Mgb2YgaXJpcyBwbGFudC4KICAgLS0tIFRoaXMgaXMgYW4gZXhjZWVkaW5nbHkgc2ltcGxlIGRvbWFpbi4KICAgLS0tIFRoaXMgZGF0YSBkaWZmZXJzIGZyb20gdGhlIGRhdGEgcHJlc2VudGVkIGluIEZpc2hlcnMgYXJ0aWNsZQoJKGlkZW50aWZpZWQgYnkgU3RldmUgQ2hhZHdpY2ssICBzcGNoYWR3aWNrQGVzcGVlZGF6Lm5ldCApCglUaGUgMzV0aCBzYW1wbGUgc2hvdWxkIGJlOiA0LjksMy4xLDEuNSwwLjIsIklyaXMtc2V0b3NhIgoJd2hlcmUgdGhlIGVycm9yIGlzIGluIHRoZSBmb3VydGggZmVhdHVyZS4KCVRoZSAzOHRoIHNhbXBsZTogNC45LDMuNiwxLjQsMC4xLCJJcmlzLXNldG9zYSIKCXdoZXJlIHRoZSBlcnJvcnMgYXJlIGluIHRoZSBzZWNvbmQgYW5kIHRoaXJkIGZlYXR1cmVzLiAgCgo1LiBOdW1iZXIgb2YgSW5zdGFuY2VzOiAxNTAgKDUwIGluIGVhY2ggb2YgdGhyZWUgY2xhc3NlcykKCjYuIE51bWJlciBvZiBBdHRyaWJ1dGVzOiA0IG51bWVyaWMsIHByZWRpY3RpdmUgYXR0cmlidXRlcyBhbmQgdGhlIGNsYXNzCgo3LiBBdHRyaWJ1dGUgSW5mb3JtYXRpb246CiAgIDEuIHNlcGFsIGxlbmd0aCBpbiBjbQogICAyLiBzZXBhbCB3aWR0aCBpbiBjbQogICAzLiBwZXRhbCBsZW5ndGggaW4gY20KICAgNC4gcGV0YWwgd2lkdGggaW4gY20KICAgNS4gY2xhc3M6IAogICAgICAtLSBJcmlzIFNldG9zYQogICAgICAtLSBJcmlzIFZlcnNpY29sb3VyCiAgICAgIC0tIElyaXMgVmlyZ2luaWNhCgo4LiBNaXNzaW5nIEF0dHJpYnV0ZSBWYWx1ZXM6IE5vbmUKClN1bW1hcnkgU3RhdGlzdGljczoKCSAgICAgICAgIE1pbiAgTWF4ICAgTWVhbiAgICBTRCAgIENsYXNzIENvcnJlbGF0aW9uCiAgIHNlcGFsIGxlbmd0aDogNC4zICA3LjkgICA1Ljg0ICAwLjgzICAgIDAuNzgyNiAgIAogICAgc2VwYWwgd2lkdGg6IDIuMCAgNC40ICAgMy4wNSAgMC40MyAgIC0wLjQxOTQKICAgcGV0YWwgbGVuZ3RoOiAxLjAgIDYuOSAgIDMuNzYgIDEuNzYgICAgMC45NDkwICAoaGlnaCEpCiAgICBwZXRhbCB3aWR0aDogMC4xICAyLjUgICAxLjIwICAwLjc2ICAgIDAuOTU2NSAgKGhpZ2ghKQoKOS4gQ2xhc3MgRGlzdHJpYnV0aW9uOiAzMy4zJSBmb3IgZWFjaCBvZiAzIGNsYXNzZXMuCg==",Ce="/courses/data-science/vectorization-reduction/assets/movies-CekC_PaI.csv",ye="/courses/data-science/vectorization-reduction/assets/9kmovies-89YQW5GB.csv",_e="/courses/data-science/vectorization-reduction/assets/9kratings-DLxWZ5yJ.csv",fe="/courses/data-science/vectorization-reduction/assets/README-Cyq7KvM_.txt",ve="/courses/data-science/vectorization-reduction/assets/links-Cvske5Ai.csv",Ge="/courses/data-science/vectorization-reduction/assets/tags-BSdIJN40.csv";function Ae(i){return i.split("?")[0]}const Be=Object.assign({"/public/data/cmu_movies/cmu_movie_summary.csv":ge,"/public/data/imdb5000/movie_metadata.csv":ue,"/public/data/imdb5000/movie_metadata_clean.csv":me,"/public/data/iris/Index":Ie,"/public/data/iris/bezdekIris.data":pe,"/public/data/iris/iris.data":he,"/public/data/iris/iris.names":be,"/public/data/movies.csv":Ce,"/public/data/movieslens9k/9kmovies.csv":ye,"/public/data/movieslens9k/9kratings.csv":_e,"/public/data/movieslens9k/README.txt":fe,"/public/data/movieslens9k/links.csv":ve,"/public/data/movieslens9k/tags.csv":Ge}),Ze=Object.values(Be).map(Ae),R=[];let N=!1;function we(){if(N)return;N=!0;const i=async()=>{const t=R.shift();t?(await t(),i()):N=!1};i()}function Se(i){return i.split("/").pop().replace(/-[A-Za-z0-9_]{6,12}(?=\.[^.]+$)/,"")}async function We(i,t){const n=Se(t),a=await(await fetch(t,{method:"GET",cache:"no-store"})).text(),d=a.slice(0,500).toLowerCase();if(d.includes("<html")||d.includes("doctype html"))throw new Error(`Fetched HTML instead of CSV from ${t}. Check path/base.`);i.FS.writeFile(n,a)}const Ne=re(()=>({python:async i=>new Promise(t=>{R.push(async()=>{var d;const n=await de();for(const o of Ze)try{await We(n,o)}catch(c){console.warn(`Failed to preload ${o}:`,c)}let r="",a="";n.setStdout({batched:o=>r+=o});try{await n.runPythonAsync(`
def _is_expr(code):
  try:
    compile(code, '<input>', 'eval')
    return True
  except:
    return False
`);const c=[...i.trim().split(`
`)].reverse().find(l=>l.trim())||"",e=/^\s*\w+\s*=/.test(c),s=/^\s*print\(/.test(c);if(await n.runPythonAsync(i),!s&&!e&&c?await n.runPythonAsync(`_is_expr(${JSON.stringify(c)})`):!1){const l=await n.runPythonAsync(`_ = ${c}
_`);((d=l==null?void 0:l.__class__)==null?void 0:d.__name__)==="DataFrame"?a=await n.runPythonAsync("_.to_html()"):l!==void 0&&(r+=l.toString()+`
`)}const g=r.replace(/\n/g,"<br>");t(a?{html:`
<div style="overflow:auto; max-height:300px; border:1px solid #ccc; padding:0.5em;">
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
      font-family: sans-serif;
      font-size: 8px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 1px;
      text-align: left;
    }
    tr:nth-child(even) { background-color: #f9f9f9; }
    th { background-color: #f2f2f2; font-weight: bold; }
  </style>
  ${a}
</div>`}:{html:`<div style="font-size: 10px; font-family: monospace; overflow-x: auto;">${g}</div>`})}catch(o){t({text:o.toString()})}}),we()})})),ke=[Ne],ze=ne(async()=>{const i={javascript:w,js:w,typescript:w,ts:w},{getHighlighter:t}=await E(async()=>{const{getHighlighter:a}=await import("./slidev/shiki-BpGKog2C.js");return{getHighlighter:a}},__vite__mapDeps([0,1,2,3,4,5,6])),n=await t(),r=async(a,d,o)=>{try{const c=i[d];if(!c)throw new Error(`Runner for language "${d}" not found`);return await c(a,{options:o,highlight:n,run:async(e,s)=>await r(e,s,o)})}catch(c){return console.error(c),{error:`${c}`}}};for(const a of ke){const d=await a(i);Object.assign(i,d)}return{highlight:n,run:r}});function Ve(i){const t=v([]),n=e=>t.value.push({error:String(e)}),r=(...e)=>t.value.push(e.map(d)),a=Object.assign({},console);a.info=a.log=a.debug=a.warn=a.error=r,a.clear=()=>t.value.length=0;try{const e=`return async (console, __slidev_import, __slidev_on_error) => {
      try {
        ${c(i)}
      } catch (e) {
        __slidev_on_error(e)
      }
    }`;new Function(e)()(a,s=>{const I=F[s];if(!I)throw new Error(`Module not found: ${s}.
Available modules: ${Object.keys(F).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return I},n)}catch(e){n(e)}function d(e){return typeof e=="string"?{text:e}:{text:o(e),highlightLang:"javascript"}}function o(e){var I;let s="";if(e instanceof Error)s=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")s=String(e);else if(Array.isArray(e))s=`[${e.map(o).join(", ")}]`;else if(e instanceof Set){const g=[...e];s=`Set (${e.size}) {${g.map(o).join(", ")}}`}else if(e instanceof Map){const g=[...e.entries()];s=`Map (${e.size}) {${g.map(([l,p])=>`${o(l)} => ${o(p)}`).join(", ")}}`}else if(e instanceof RegExp)s=e.toString();else if(typeof e=="string")s=JSON.stringify(e);else if(typeof e=="object"){const g=((I=e.constructor)==null?void 0:I.name)??"",l=g&&g==="Object"?"":g;s=(l?`${l}: `:"")+JSON.stringify(e,(_,b)=>b===void 0?"__undefined__":b,2).replace(/"__undefined__"/g,"undefined"),s=String(s)}else s=String(e);return s}function c(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return t}let Z;async function w(i){Z??(Z=await E(()=>import("./monaco/bundled-types-D6QPnxzs.js").then(n=>n.t),__vite__mapDeps([1,2,3,4]))),i=Z.transpileModule(i,{compilerOptions:{module:Z.ModuleKind.ESNext,target:Z.ScriptTarget.ES2022},transformers:{after:[xe]}}).outputText;const t=/import\s*\((.+)\)/g;return i=i.replace(t,(n,r)=>`__slidev_import(${r})`),Ve(i)}function xe(i){const{factory:t}=i,{isImportDeclaration:n,isNamedImports:r,NodeFlags:a}=Z;return d=>{var c,e;const o=[...d.statements];for(let s=0;s<o.length;s++){const I=o[s];if(!n(I))continue;let g;const l=(c=I.importClause)==null?void 0:c.namedBindings,p=[];if((e=I.importClause)!=null&&e.name&&p.push(t.createBindingElement(void 0,t.createIdentifier("default"),I.importClause.name)),l)if(r(l)){for(const b of l.elements)p.push(t.createBindingElement(void 0,b.propertyName,b.name));g=t.createObjectBindingPattern(p)}else g=t.createIdentifier(l.name.text);else g=t.createObjectBindingPattern(p);const _=t.createVariableStatement(void 0,t.createVariableDeclarationList([t.createVariableDeclaration(g,void 0,void 0,t.createAwaitExpression(t.createCallExpression(t.createIdentifier("import"),void 0,[I.moduleSpecifier])))],a.Const));o[s]=_}return t.updateSourceFile(d,o)}}const Fe=Y({__name:"DomElement",props:{element:{}},setup(i){const t=i,n=v();return X(()=>{n.value&&n.value.appendChild(t.element)}),(r,a)=>(u(),m("div",{ref_key:"container",ref:n},null,512))}}),Ye={key:0,class:"text-sm text-center opacity-50"},Ee={key:1,class:"text-sm text-center opacity-50"},Re={key:2,class:"text-sm text-center opacity-50"},Me=["innerHTML"],Xe={key:1,class:"text-red-500"},Le={key:3,class:"output-line"},Je=["innerHTML"],je={key:2,class:"separator"},Te={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},$e=Y({__name:"CodeRunner",props:{modelValue:{},lang:{},autorun:{type:[Boolean,String]},height:{},showOutputAt:{type:[null,Boolean,String,Number,Array]},highlightOutput:{type:Boolean},runnerOptions:{}},emits:["update:modelValue"],setup(i,{emit:t}){const n=i,r=t,{isPrintMode:a}=ae(),d=L(n,"modelValue",r),{$renderContext:o,$clicksContext:c}=oe(),e=J(()=>!["slide","presenter"].includes(o.value)),s=a.value?"once":n.autorun,I=v(s),g=j(),l=v(0),p=v(),_=v(n.showOutputAt);if(n.showOutputAt){const G=se();T(()=>{const C=c.calculate(n.showOutputAt);C?(c.register(G,C),U(()=>{_.value=!C.isActive.value})):_.value=!1}),H(()=>c.unregister(G))}const b=ie(200,async()=>{if(e.value)return;const{highlight:G,run:C}=await ze();p.value=G;const h=setTimeout(()=>{I.value=!0},500);g.value=await C(d.value,n.lang,n.runnerOptions??{}),l.value+=1,I.value=!1,clearTimeout(h)});return s==="once"?b():s&&O(d,b,{immediate:!0}),(G,C)=>(u(),m(B,null,[D(V("div",{class:"relative flex flex-col rounded-b border-t border-main",style:q({height:n.height}),"data-waitfor":".slidev-runner-output"},[e.value?(u(),m("div",Ye,' Code is disabled in the "'+S(f(o))+'" mode ',1)):I.value?(u(),m("div",Ee," Running... ")):g.value?(u(),m("div",{key:`run-${l.value}`,class:"slidev-runner-output"},[(u(!0),m(B,null,x(f(W)($(g.value)),(h,M)=>(u(),m(B,{key:M},["html"in h?(u(),m("div",{key:0,innerHTML:h.html},null,8,Me)):"error"in h?(u(),m("div",Xe,S(h.error),1)):"element"in h?(u(),Q(Fe,{key:2,element:h.element},null,8,["element"])):(u(),m("div",Le,[(u(!0),m(B,null,x(f(W)(h),(A,k)=>(u(),m(B,{key:k},[A.highlightLang&&p.value?(u(),m("span",{key:0,class:"highlighted",innerHTML:p.value(A.text,A.highlightLang)},null,8,Je)):(u(),m("span",{key:1,class:P(A.class)},S(A.text),3)),k<f(W)(h).length-1?(u(),m("span",je,",")):z("v-if",!0)],64))),128))]))],64))),128))])):(u(),m("div",Re," Click the play button to run the code "))],4),[[K,!_.value]]),f(d).trim()?(u(),m("div",Te,[ee(ce,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:f(b)},{default:te(()=>C[0]||(C[0]=[V("div",{class:"i-carbon:play"},null,-1)])),_:1},8,["onClick"])])):z("v-if",!0)],64))}});export{$e as default};
